@import url('https://fonts.googleapis.com/css2?family=Shrikhand&family=Nunito:wght@400;600;700&display=swap');

:root {
  font-family: 'Nunito', system-ui, -apple-system, BlinkMacSystemFont,
    'SF Pro Text', system-ui, sans-serif;
  line-height: 1.4;
  font-weight: 400;
  color: #fde9d3;
  background-color: #2a1409;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-width: 320px;
  min-height: 100vh;
  background:
    radial-gradient(circle at top left, #ffcf7a 0, transparent 55%),
    radial-gradient(circle at bottom right, #f26c3b 0, transparent 55%),
    linear-gradient(135deg, #3a1b0e 0, #1e0c05 55%, #3a1b0e 100%);
  color: inherit;
  overflow: hidden;
  touch-action: none;
  overscroll-behavior: none;
}

#root {
  min-height: 100vh;
}

.cubic-viewport {
  height: 100vh;
  height: 100dvh;
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  overflow: hidden;
}

.hexaclear-root {
  height: 100%;
  display: flex;
  flex-direction: column;
  padding: 0.9rem;
  /* Lock the game width so it doesn't shrink when the hand contents
     get narrower (e.g. 1 piece left). This keeps the board scale
     stable regardless of hand state. */
  width: 100%;
  max-width: 520px;
  margin: 0 auto;
  gap: 0.75rem;
}

.hexaclear-header {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  gap: 0.5rem;
}

.hexaclear-header-main {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}

.hexaclear-title {
  font-family: 'Shrikhand', cursive;
  font-weight: 400;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  font-size: 1.2rem;
  color: #ffe8a3;
  text-shadow:
    0 2px 0 #b2481b,
    0 0 12px rgba(0, 0, 0, 0.45);
}

.hexaclear-best-banner {
  padding: 0.15rem 0.7rem;
  border-radius: 999px;
  background: rgba(58, 18, 4, 0.8);
  border: 1px solid rgba(255, 205, 143, 0.8);
  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.4);
}

.hexaclear-best-banner .label {
  font-size: 0.65rem;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  opacity: 0.85;
}

.hexaclear-best-banner .value {
  margin-left: 0.35rem;
  font-size: 1rem;
  font-weight: 700;
}

.hexaclear-stat {
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.hexaclear-stat .label {
  opacity: 0.72;
  font-size: 0.7rem;
}

.hexaclear-stat .value {
  font-variant-numeric: tabular-nums;
}

.hexaclear-reset {
  border-radius: 999px;
  border: 1px solid rgba(255, 205, 143, 0.85);
  background: linear-gradient(135deg, #f7b35a, #f37a3b);
  color: #3a1204;
  padding: 0.35rem 0.65rem;
  font-size: 0.7rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  cursor: pointer;
  box-shadow:
    0 0 0 1px rgba(0, 0, 0, 0.2),
    0 6px 14px rgba(0, 0, 0, 0.45);
}

.hexaclear-header-controls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.5rem;
}

.hexaclear-mode-toggle {
  display: inline-flex;
  border-radius: 999px;
  padding: 0.1rem;
  background: rgba(29, 10, 3, 0.9);
  box-shadow: 0 0 0 1px rgba(255, 205, 143, 0.45);
}

.hexaclear-mode-toggle .mode-pill {
  border: none;
  border-radius: 999px;
  padding: 0.22rem 0.55rem;
  font-size: 0.68rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  cursor: pointer;
  background: transparent;
  color: #ffddb1;
}

.hexaclear-mode-toggle .mode-pill.active {
  background: linear-gradient(135deg, #f7b35a, #f37a3b);
  color: #3a1204;
}

.hexaclear-header-buttons {
  display: flex;
  gap: 0.4rem;
}

.hexaclear-main {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.hexaclear-board-wrapper {
  position: relative;
  flex: 1;
  min-height: 260px;
  border-radius: 1.25rem;
  background:
    radial-gradient(circle at 10% 0%, #5a341b, #3b2317 55%, #28130a 100%);
  box-shadow:
    0 0 0 1px rgba(255, 204, 153, 0.25),
    0 18px 45px rgba(0, 0, 0, 0.75),
    0 0 80px rgba(255, 140, 64, 0.2);
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: visible;
}

.hexaclear-board-hud {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  padding: 0.7rem 0.9rem;
  pointer-events: none;
}

.hexaclear-board-hud .board-hud-block {
  font-family: 'Shrikhand', cursive;
  color: #fff7eb;
  text-shadow: 0 3px 6px rgba(0, 0, 0, 0.7);
}

.hexaclear-board-hud .board-hud-block .label {
  font-size: 1.1rem;
  margin-right: 0.25rem;
}

.hexaclear-board-hud .board-hud-block .value {
  font-size: 1.4rem;
}

.hexaclear-board-hud .board-hud-block .value.small {
  font-size: 0.8rem;
  display: block;
  max-width: 7.5rem;
}


.hexaclear-board-hud .board-hud-block.right {
  text-align: center;
}

.hexaclear-board-hud .board-hud-block.right .label {
  display: block;
  margin-right: 0;
}

.hexaclear-board-hud .board-hud-block.right .value {
  display: block;
}

.hexaclear-board {
  width: 100%;
  height: 100%;
  touch-action: none;
  -webkit-user-drag: none;
  user-select: none;
}

.hexaclear-hex {
  stroke-width: 2.6;
  vector-effect: non-scaling-stroke;
  transition:
    fill 0.15s ease-out,
    stroke 0.15s ease-out,
    opacity 0.1s ease-out;
}

.hexaclear-hex.empty {
  fill: transparent;
  stroke: #94633a;
}

.hexaclear-hex.filled {
  fill: transparent;
  stroke: none;
}

.hexaclear-hex.clearing {
  fill: transparent;
  stroke: #94633a;
}

.hexaclear-flower-boundary-back {
  /* Dark base stroke - creates depth contrast */
  stroke: rgba(90, 50, 8, 0.95);
  stroke-width: 5.2;
  stroke-linecap: round;
  stroke-linejoin: round;
  vector-effect: non-scaling-stroke;
}

.hexaclear-flower-boundary {
  /* Orange color: R:255 G:125 B:0, Brightness:67%, Saturation:105%, Opacity:100% */
  /* Calculated: R:175 G:83 B:0 */
  stroke: rgb(175, 83, 0);
  stroke-width: 3.4;
  stroke-linecap: round;
  stroke-linejoin: round;
  vector-effect: non-scaling-stroke;
}

.hexaclear-flower-boundary-group {
  /* Drop shadow applied to entire group for contiguous appearance */
  filter: drop-shadow(0 2px 1.5px rgba(0, 0, 0, 0.75));
}

/* Debug Modal Styles */
.hexaclear-debug-modal-overlay {
  position: fixed;
  inset: 0;
  background: transparent;
  display: flex;
  align-items: flex-start;
  justify-content: flex-end;
  z-index: 1000;
  pointer-events: none;
}

.hexaclear-debug-modal-overlay > * {
  pointer-events: auto;
}

.hexaclear-debug-modal {
  background: #2f1a0f;
  border: 2px solid #94633a;
  border-radius: 0.5rem;
  padding: 1.5rem;
  max-width: 400px;
  width: 90%;
  max-height: 90vh;
  overflow-y: auto;
  margin: 1rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.8);
}

.hexaclear-debug-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
  border-bottom: 1px solid #94633a;
  padding-bottom: 0.5rem;
}

.hexaclear-debug-modal-header h2 {
  margin: 0;
  color: #fff7eb;
  font-size: 1.2rem;
}

.hexaclear-debug-modal-header button {
  background: none;
  border: none;
  color: #fff7eb;
  font-size: 1.5rem;
  cursor: pointer;
  padding: 0;
  width: 2rem;
  height: 2rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

.hexaclear-debug-modal-header button:hover {
  color: #ffc469;
}

.hexaclear-debug-modal-content {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.hexaclear-debug-slider {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.hexaclear-debug-slider label {
  color: #fff7eb;
  font-size: 0.9rem;
  font-weight: 500;
}

.hexaclear-debug-slider input[type="range"] {
  width: 100%;
  height: 6px;
  background: #402214;
  border-radius: 3px;
  outline: none;
  -webkit-appearance: none;
}

.hexaclear-debug-slider input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 18px;
  height: 18px;
  background: #ffc469;
  border-radius: 50%;
  cursor: pointer;
}

.hexaclear-debug-slider input[type="range"]::-moz-range-thumb {
  width: 18px;
  height: 18px;
  background: #ffc469;
  border-radius: 50%;
  cursor: pointer;
  border: none;
}

.hexaclear-debug-values {
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid #94633a;
}

.hexaclear-debug-values h3 {
  margin: 0 0 0.5rem 0;
  color: #fff7eb;
  font-size: 1rem;
}

.hexaclear-debug-values p {
  margin: 0.25rem 0;
  color: #ffe5a8;
  font-family: monospace;
  font-size: 0.9rem;
}

.hexaclear-debug-label {
  font-size: 8px;
  fill: rgba(180, 220, 255, 0.9);
  text-anchor: middle;
  pointer-events: none;
}

.hexaclear-slot-top {
  fill: #190c07; /* slightly darker bottom plane */
}

.hexaclear-slot-right {
  fill: #2f1a0f; /* darker side away from light */
}

.hexaclear-slot-left {
  fill: #402214; /* darker side catching light from top-right */
}

.hexaclear-board-outline-back {
  stroke: rgba(0, 0, 0, 0.72);
  stroke-width: 11;
  stroke-linecap: round;
  vector-effect: non-scaling-stroke;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.6)) blur(0.5px);
}

.hexaclear-board-outline-front {
  stroke: #008762;
  stroke-width: 4;
  stroke-linecap: round;
  vector-effect: non-scaling-stroke;
  filter: drop-shadow(0 1px 3px rgba(0, 0, 0, 0.65));
}

.hexaclear-hex.preview-valid {
  fill: rgba(251, 211, 134, 0.35);
  stroke: #ffc469;
}

.hexaclear-hex.preview-invalid {
  fill: rgba(189, 68, 68, 0.45);
  stroke: #ff8a7a;
}

.hexaclear-hex.preview-invalid + .hexaclear-hex-cube .cube-face {
  filter: brightness(0.7) saturate(1.3);
}

.hexaclear-placement-ghost .placement-ghost {
  pointer-events: none;
}

.hexaclear-placement-ghost .placement-ghost-valid {
  /* For valid ghost placements, show only an outline so we don’t get a
     solid background plate behind animated cubes. */
  fill: transparent;
  stroke: #ffc469;
  stroke-width: 2.4;
}

.hexaclear-placement-ghost .placement-ghost-invalid {
  fill: rgba(189, 68, 68, 0.55);
  stroke: #ff8a7a;
}

.hexaclear-hex.empty.preview-clear {
  /* For empty cells that will be cleared, keep the board background
     visible and just add a subtle edge highlight. */
  fill: transparent;
  stroke: #ffe9a6;
  stroke-width: 3;
}

.hexaclear-hex.filled.preview-clear {
  /* For filled cells that will clear, restore the normal board edge stroke
     so the hex boundary is visible behind the shrunk cube. */
  stroke: #94633a;
}

/* JUST-PLACED IMPACT: the newly placed shape briefly "locks in" as a whole,
   scaling up from slightly smaller to its final size without breaking the
   adjacency between its hexes. */
.hexaclear-placed-overlay {
  transform-box: fill-box;
  transform-origin: center;
}

.hexaclear-placed-overlay.placed-impact {
  animation: hexaclear-placed-pop 200ms cubic-bezier(0.2, 0.7, 0.3, 1) both;
}

@keyframes hexaclear-placed-pop {
  0% {
    transform: scale(0.85);
  }
  70% {
    transform: scale(1.08);
  }
  100% {
    transform: scale(1);
  }
}

/* DAILY HIT PULSE: when a numbered daily cube is hit but not cleared, give the
   cube a quick nudge so the decrement feels impactful. */
.hexaclear-hex-cube.daily-target.daily-hit-pulse {
  animation: hexaclear-daily-hit-pulse 220ms ease-out both;
}

@keyframes hexaclear-daily-hit-pulse {
  0% {
    transform: translateY(0) scale(1);
  }
  35% {
    transform: translateY(-3px) scale(1.06);
  }
  100% {
    transform: translateY(0) scale(1);
  }
}

/* Ruby uses the same clear animation as other cubes; only +10 popup is special. */

/* BOARD RIPPLE: colored pulse that propagates from the placement cluster out
   across the board. Only the hex grid lines are affected; slots and cubes stay
   fixed in place. */
.hexaclear-cell.ripple-active .hexaclear-hex {
  animation-name: hexaclear-board-ripple;
  animation-duration: 260ms;
  animation-timing-function: cubic-bezier(0.2, 0.7, 0.3, 1);
  animation-fill-mode: both;
}

@keyframes hexaclear-board-ripple {
  0% {
    stroke: #94633a;
    stroke-width: 2.6;
  }
  35% {
    stroke: #ffcf73;
    stroke-width: 2.9;
  }
  75% {
    stroke: #d9a45c;
    stroke-width: 2.7;
  }
  100% {
    stroke: #94633a;
    stroke-width: 2.6;
  }
}

/* INVALID DROP FEEDBACK: when a piece is released over an illegal cell,
   briefly flash that cell and shake the hand card so the failure feels
   physical rather than silent. Apply at multiple levels so the glow is
   always visible above the slot geometry. */
.hexaclear-cell.invalid-drop,
.hexaclear-hex.invalid-drop,
.hexaclear-hex-cube.invalid-drop {
  animation: hexaclear-invalid-flash 520ms ease-out both;
}

@keyframes hexaclear-invalid-flash {
  0% {
    /* start from normal board stroke so the pop feels like a discrete oops */
    stroke: #94633a;
    stroke-width: 2.6;
  }
  18% {
    /* first snap to bright red */
    stroke: #ff4040;
    stroke-width: 4;
  }
  36% {
    /* snap back to normal */
    stroke: #94633a;
    stroke-width: 2.6;
  }
  54% {
    /* second quick red snap */
    stroke: #ff4040;
    stroke-width: 4;
  }
  100% {
    /* settle back to normal board stroke */
    stroke: #94633a;
    stroke-width: 2.6;
  }
}

/* LINE CLEARS: cubes shrink straight into the center of their hex in a
   quick wave down the line. While clearing, hide the board hex itself so
   there’s no flat background plate behind the cubes. */
.hexaclear-hex-cube.clearing-line {
  transform-box: fill-box;
  transform-origin: center;
}

.hexaclear-hex.clearing-line {
  fill: transparent;
  stroke: #94633a;
}

.hexaclear-hex-cube.clearing-line-step-0 {
  animation: hexaclear-line-clear 220ms ease-in both 0ms;
}

.hexaclear-hex-cube.clearing-line-step-1 {
  animation: hexaclear-line-clear 220ms ease-in both 40ms;
}

.hexaclear-hex-cube.clearing-line-step-2 {
  animation: hexaclear-line-clear 220ms ease-in both 80ms;
}

.hexaclear-hex-cube.clearing-line-step-3 {
  animation: hexaclear-line-clear 220ms ease-in both 120ms;
}

.hexaclear-hex-cube.clearing-line-step-4 {
  animation: hexaclear-line-clear 220ms ease-in both 160ms;
}

.hexaclear-hex-cube.clearing-line-step-5 {
  animation: hexaclear-line-clear 220ms ease-in both 200ms;
}

.hexaclear-hex-cube.clearing-line-step-6 {
  animation: hexaclear-line-clear 220ms ease-in both 240ms;
}

@keyframes hexaclear-line-clear {
  0% {
    transform: scale(0.80);
    opacity: 1;
  }
  100% {
    transform: scale(0);
    opacity: 0;
  }
}

/* FLOWER (ROSETTE) CLEARS: center shrinks first, then the ring.
   As with lines, hide the board hex during the animation so only cubes
   are visible. */
.hexaclear-hex-cube.clearing-flower-center {
  transform-box: fill-box;
  transform-origin: center;
  animation: hexaclear-flower-center-clear 260ms ease-in both;
}

.hexaclear-hex-cube.clearing-flower-ring {
  transform-box: fill-box;
  transform-origin: center;
  animation: hexaclear-flower-ring-clear 260ms ease-in both 190ms;
}

.hexaclear-hex.clearing-flower-center,
.hexaclear-hex.clearing-flower-ring {
  fill: transparent;
  stroke: #94633a;
}

@keyframes hexaclear-flower-center-clear {
  0% {
    transform: scale(0.80);
    opacity: 1;
  }
  100% {
    transform: scale(0);
    opacity: 0;
  }
}

@keyframes hexaclear-flower-ring-clear {
  0% {
    transform: scale(0.80);
    opacity: 1;
  }
  100% {
    transform: scale(0);
    opacity: 0;
  }
}

/* TO-BE-CLEARED HIGHLIGHT: cubes and ghost cells are simply shrunk in
   place to stand out from the board without extra motion. */
.hexaclear-hex.preview-clear + .hexaclear-hex-cube {
  transform-box: fill-box;
  transform-origin: center;
  /* Ease into the smaller state with wiggle; snapping back to full size when
     the preview-clear flag is removed (rule no longer applies). */
  animation: hexaclear-preview-clear-scale-in 200ms cubic-bezier(0.2, 0.7, 0.3, 1) forwards,
             hexaclear-cube-wiggle 120ms ease-in-out infinite alternate 200ms;
}

/* And apply the same motion to the "ghost" preview hexes that both
   belong to the piece (preview-valid) and are part of the clear. */
.hexaclear-hex.preview-clear.preview-valid {
  transform-box: fill-box;
  transform-origin: center;
  animation: hexaclear-preview-clear-scale-in 200ms cubic-bezier(0.2, 0.7, 0.3, 1) forwards,
             hexaclear-cube-wiggle 120ms ease-in-out infinite alternate 200ms;
}

/* Scale-in animation: smoothly shrink to 0.8 scale. */
@keyframes hexaclear-preview-clear-scale-in {
  0% {
    transform: scale(1) rotate(0deg);
  }
  100% {
    transform: scale(0.80) rotate(0deg);
  }
}

/* iOS-style homescreen wiggle: pure rotation around center, no translation.
   This runs after the scale-in completes, combining both transforms. */
@keyframes hexaclear-cube-wiggle {
  0% {
    transform: scale(0.80) rotate(-1.8deg);
  }
  100% {
    transform: scale(0.80) rotate(1.8deg);
  }
}

/* On coarse (touch) pointers, keep the same motion but slightly bump
   contrast so it stays readable on mobile browsers. */
@media (pointer: coarse) {
  .hexaclear-hex.empty.preview-clear {
    fill: transparent;
    stroke-width: 3;
  }

  .hexaclear-hex.preview-clear + .hexaclear-hex-cube,
  .hexaclear-hex.preview-clear.preview-valid {
    animation-duration: 580ms;
  }
}

.hexaclear-hex.piece {
  fill: #ffe9c6;
  stroke: #3f2315;
}

.hexaclear-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: radial-gradient(circle, rgba(0, 0, 0, 0.65), rgba(0, 0, 0, 0.95));
}

.hexaclear-overlay-card {
  padding: 1.25rem 1.5rem;
  border-radius: 1rem;
  background: linear-gradient(145deg, #402116, #2a1209);
  box-shadow: 0 18px 45px rgba(0, 0, 0, 0.8);
  text-align: center;
}

.hexaclear-overlay-card .title {
  font-weight: 600;
  margin-bottom: 0.35rem;
}

.hexaclear-overlay-card .score {
  font-size: 0.9rem;
  opacity: 0.8;
  margin-bottom: 0.9rem;
}

.hexaclear-input {
  width: 100%;
  padding: 0.4rem 0.6rem;
  border-radius: 0.5rem;
  border: 1px solid rgba(255, 205, 143, 0.7);
  background: rgba(44, 20, 11, 0.95);
  color: #fde9d3;
  font-family: inherit;
  font-size: 16px; /* Prevent iOS input-focus zoom */
}

.hexaclear-overlay-card button {
  border-radius: 999px;
  border: none;
  padding: 0.5rem 1.25rem;
  background: linear-gradient(135deg, #ffcf73, #ff904f);
  color: #3a1204;
  font-weight: 600;
  cursor: pointer;
}

.hexaclear-score-popup {
  position: absolute;
  top: 1.4rem;
  left: 50%;
  transform: translateX(-50%);
  padding: 0.4rem 1.1rem;
  border-radius: 999px;
  border: 1px solid rgba(255, 213, 143, 0.9);
  background: rgba(52, 23, 10, 0.96);
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  font-weight: 500;
  z-index: 2;
  animation: hexaclear-score-popup-fade 2.6s ease-out forwards;
}

.hexaclear-hex-cube line {
  stroke: rgba(40, 20, 10, 0.95);
  stroke-width: 2.2;
  vector-effect: non-scaling-stroke;
}

.hexaclear-hex-cube .cube-top {
  fill: #ffe18a;
}

.hexaclear-hex-cube .cube-right {
  fill: #b85a24;
}

.hexaclear-hex-cube .cube-left {
  fill: #f69d34;
}

.hexaclear-hex-cube.golden .cube-top {
  fill: #ff5a8a; /* bright ruby top */
}

.hexaclear-hex-cube.golden .cube-right {
  fill: #b01232;
}

.hexaclear-hex-cube.golden .cube-left {
  fill: #e23c5c;
}

.hexaclear-hex-cube.golden .cube-face {
  filter:
    brightness(1.12)
    saturate(1.2)
    drop-shadow(0 0 8px rgba(255, 120, 160, 0.65));
}

.hexaclear-gem-label {
  font-family: 'Shrikhand', cursive;
  font-size: 0.8rem;
  fill: #fff7f2;
  stroke: rgba(110, 30, 30, 0.95);
  stroke-width: 0.4px;
  text-anchor: middle;
  paint-order: stroke;
}
.hexaclear-hex-cube.daily-target .cube-top {
  fill: #f7f3e4; /* bright metallic highlight */
}

.hexaclear-hex-cube.daily-target .cube-right {
  fill: #c7ab76; /* darker, shadowed metal */
}

.hexaclear-hex-cube.daily-target .cube-left {
  fill: #e4c68b; /* mid-tone metal */
}

.hexaclear-hex-cube.daily-target .cube-face {
  /* Slightly higher contrast and brightness for a metallic feel */
  filter: brightness(1.1) contrast(1.15) saturate(0.9);
}

.hexaclear-hex-cube.daily-target {
  /* No outer drop shadow so adjacent metal cubes never shade each other.
     Rely on face colors and embossed numbers for depth. */
  filter: none;
}

.hexaclear-hex-cube .cube-face,
.hexaclear-cube-wiggle-wrap {
  transform-box: fill-box;
  transform-origin: center;
}

.hexaclear-daily-number {
  font-family: 'Nunito', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  font-weight: 700;
  font-size: 0.92rem;
  paint-order: stroke;
  stroke-width: 0.7px;
  text-anchor: middle;
  dominant-baseline: middle;
}

.daily-number-top {
  fill: #d3b47c;
  stroke: rgba(112, 70, 30, 0.9);
  /* Engraved into a light top face: slightly inset, with highlight on top-right */
  filter:
    drop-shadow(0.5px 0.7px 0 rgba(0, 0, 0, 0.85))
    drop-shadow(-0.4px -0.6px 0 rgba(255, 252, 236, 0.7));
}

.daily-number-right {
  fill: #b18a52;
  stroke: rgba(84, 49, 19, 0.95);
  /* Right face is darker and more vertical: shadow pulled downwards, light from top-right */
  filter:
    drop-shadow(0.8px 1.2px 0 rgba(0, 0, 0, 0.9))
    drop-shadow(-0.3px -0.5px 0 rgba(249, 233, 208, 0.55));
}

.daily-number-left {
  fill: #cfa05d;
  stroke: rgba(95, 55, 20, 0.9);
  /* Left face catches more light: stronger highlight along upper-right edge */
  filter:
    drop-shadow(0.4px 0.9px 0 rgba(0, 0, 0, 0.8))
    drop-shadow(-0.7px -0.9px 0 rgba(255, 250, 232, 0.8));
}

/* Legacy flip-clear kept for reference; no longer used for active clears. */

.hexaclear-ghost {
  position: absolute;
  pointer-events: none;
  z-index: 10;
  opacity: 0.6;
}

.hexaclear-undo-animation {
  position: absolute;
  pointer-events: none;
  z-index: 12;
  transform-origin: center;
  animation: hexaclear-undo-fly 350ms cubic-bezier(0.2, 0.7, 0.3, 1) forwards;
}

@keyframes hexaclear-undo-fly {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(var(--undo-delta-x), var(--undo-delta-y)) translate(-50%, -50%) scale(0.4);
    opacity: 0.8;
  }
}

.hexaclear-undo-button {
  position: absolute;
  right: 0.85rem;
  bottom: 0.8rem;
  padding: 0.3rem 0.8rem;
  border-radius: 999px;
  border: 1px solid rgba(255, 205, 143, 0.9);
  background: linear-gradient(135deg, #f0c77a, #f08a4b);
  color: #3a1204;
  font-size: 0.72rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  cursor: pointer;
  box-shadow:
    0 0 0 1px rgba(0, 0, 0, 0.25),
    0 6px 14px rgba(0, 0, 0, 0.5);
}

/* Hand-piece error shake for failed drops. */
.hexaclear-piece-button.failed-drop {
  animation: hexaclear-piece-failed-shake 190ms ease-out;
}

@keyframes hexaclear-piece-failed-shake {
  0% {
    transform: translateX(0);
  }
  25% {
    transform: translateX(-6px);
  }
  50% {
    transform: translateX(6px);
  }
  75% {
    transform: translateX(-4px);
  }
  100% {
    transform: translateX(0);
  }
}

.hexaclear-golden-popup {
  font-family: 'Shrikhand', cursive;
  font-size: 0.9rem;
  fill: #ffe9b3;
  stroke: rgba(110, 60, 20, 0.9);
  stroke-width: 0.4px;
  text-anchor: middle;
  paint-order: stroke;
  animation: hexaclear-golden-popup-fade 900ms ease-out forwards;
}

.hexaclear-highscores {
  list-style: none;
  padding: 0;
  margin: 0.2rem 0 0;
}

.hexaclear-highscores li {
  display: flex;
  justify-content: space-between;
  font-size: 0.85rem;
}

.hexaclear-highscores .name {
  opacity: 0.9;
}

.hexaclear-highscores .value {
  font-variant-numeric: tabular-nums;
}

.hexaclear-highscores li.recent {
  font-weight: 900;
}

.hexaclear-highscores li.recent .name,
.hexaclear-highscores li.recent .value {
  font-weight: inherit;
  color: #ffd9a0;
  text-shadow: 0 0 6px rgba(0, 0, 0, 0.7);
}

.hexaclear-hand {
  display: flex;
  justify-content: space-between;
  gap: 0.5rem;
  /* Fix the vertical footprint of the hand so the board never
     grows or shrinks as different piece shapes appear/disappear. */
  min-height: 110px;
}

.hexaclear-piece-button {
  flex: 1;
  border-radius: 0.9rem;
  border: 1px solid rgba(255, 197, 138, 0.7);
  background:
    radial-gradient(circle at 10% 0%, #4e2413, #2a1007 65%, #120502 100%);
  padding: 0.3rem 0.2rem;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: grab;
  height: 110px;
  -webkit-user-drag: none;
  user-select: none;
  touch-action: none;
}

.hexaclear-piece-button.selected {
  border-color: #ffd57b;
  box-shadow: 0 0 0 1px rgba(255, 213, 123, 0.7);
}

.hexaclear-piece-button.unplayable {
  opacity: 0.45;
}

.hexaclear-piece-button.unplayable .hexaclear-piece-svg {
  filter: grayscale(1) brightness(0.7);
}

.hexaclear-piece-button.dragging {
  cursor: grabbing;
}

.hexaclear-piece-button .hexaclear-piece-svg {
  width: 100%;
  height: 100%;
}

button {
  font-family: inherit;
}

@media (min-width: 768px) {
  .hexaclear-root {
    padding-top: 1.25rem;
    padding-bottom: 1.25rem;
}
}

@keyframes hexaclear-flip-clear {
  0% {
    transform: scaleX(1);
    opacity: 1;
  }
  50% {
    transform: scaleX(0);
    opacity: 0.9;
  }
  100% {
    transform: scaleX(1);
    opacity: 0;
  }
}

@keyframes hexaclear-score-popup-fade {
  0% {
    opacity: 0;
    transform: translate(-50%, 8px);
  }
  15% {
    opacity: 1;
    transform: translate(-50%, 0);
  }
  100% {
    opacity: 0;
    transform: translate(-50%, -4px);
  }
}

/* Score particles: individual numbers that flow from cleared patterns to score counter */
.hexaclear-score-particles {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 15;
}

.hexaclear-score-particle {
  position: absolute;
  transform-origin: center;
  animation: hexaclear-score-particle-fly 1400ms cubic-bezier(0.2, 0.7, 0.3, 1) forwards;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.2rem;
}

.hexaclear-score-particle-value {
  font-family: 'Shrikhand', cursive;
  font-size: 2.8rem;
  font-weight: 700;
  color: #fff9e6;
  text-shadow:
    0 0 2px rgba(0, 0, 0, 0.8),
    0 0 4px rgba(0, 0, 0, 0.6),
    0 1px 2px rgba(0, 0, 0, 0.9);
  white-space: nowrap;
  line-height: 1;
}

.hexaclear-score-particle-label {
  font-family: 'Nunito', system-ui, sans-serif;
  font-size: 0.9rem;
  font-weight: 700;
  color: #d9a45c;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  opacity: 0.95;
  margin-top: 0.3rem;
}


@keyframes hexaclear-score-particle-fly {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.3);
  }
  20% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1.2);
  }
  30% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
  85% {
    opacity: 1;
    transform: translate(calc(-50% + var(--particle-delta-x) * 0.92), calc(-50% + var(--particle-delta-y) * 0.92)) scale(0.85);
  }
  100% {
    opacity: 0;
    transform: translate(calc(-50% + var(--particle-delta-x) * 0.95), calc(-50% + var(--particle-delta-y) * 0.95)) scale(0.6);
  }
}

/* Score counter celebration when particles merge */
.board-hud-block.right .value {
  transition: transform 200ms cubic-bezier(0.2, 0.7, 0.3, 1);
}

.board-hud-block.right .value.score-celebrate {
  animation: hexaclear-score-counter-pop 400ms cubic-bezier(0.2, 0.7, 0.3, 1);
}

@keyframes hexaclear-score-counter-pop {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.15);
    filter: brightness(1.3) drop-shadow(0 0 12px rgba(255, 233, 179, 0.8));
  }
  100% {
    transform: scale(1);
    filter: brightness(1) drop-shadow(0 0 0 rgba(0, 0, 0, 0));
  }
}

@keyframes hexaclear-golden-popup-fade {
  0% {
    opacity: 0;
    transform: translateY(4px);
  }
  20% {
    opacity: 1;
    transform: translateY(0);
  }
  100% {
    opacity: 0;
    transform: translateY(-8px);
  }
}

@keyframes hexaclear-preview-pulse {
  0% {
    opacity: 0.75;
  }
  100% {
    opacity: 1;
  }
}


/* Thin circular ring ripple: overlay of hex edges clipped by a circular
   mask. The underlying board lines stay static; only this overlay is
   revealed where the ring passes. */
.hexaclear-board-ripple-overlay .hexaclear-hex.ripple-overlay {
  fill: none;
  stroke: #ffe5a8;
  stroke-width: 3.4;
  vector-effect: non-scaling-stroke;
  pointer-events: none;
}

.hexaclear-board-ripple-overlay.soft .hexaclear-hex.ripple-overlay {
  stroke: #d7b773;
}

.hexaclear-ripple-ring {
  fill: none;
  stroke: #ffffff;
  stroke-width: 18;
  stroke-linecap: round;
}


/* Reflected clear ripple: dimmer, thinner inward wave that bounces back from
   the board hull. This is a per-cell edge effect, seeded at the hull cells
   when the main clear ring reaches them, then propagated inward via BFS. */
.hexaclear-cell.bounce-wave .hexaclear-hex {
  animation: hexaclear-bounce-ripple 260ms ease-out both;
}

@keyframes hexaclear-bounce-ripple {
  0% {
    stroke: #d3b26f;
    stroke-width: 2.3;
  }
  45% {
    stroke: #f0cc7c;
    stroke-width: 2.5;
  }
  100% {
    stroke: #94633a;
    stroke-width: 2.6;
  }
}

.hexaclear-invalid-ghost {
  position: absolute;
  pointer-events: none;
  z-index: 11;
}

.hexaclear-invalid-ghost .hexaclear-hex-cube .cube-face {
  /* Off-board invalid ghost: show only the cube edges, no filled faces. */
  fill: none;
}

